var PushObject={position:0,selectCategory:!0,selectSearchButton:!1,scrollLoading:!1,loadListFinish:!1,category_uuid:"",TimeKey:"",reCanvas:function(category_uuid){PushObject.position=0,PushObject.loadListFinish=!1,$("#z-timeline-container").html(""),PushObject.category_uuid=category_uuid,PushObject.topic(category_uuid)},scrollFunction:function(){document.body.scrollTop>20||document.documentElement.scrollTop>20?document.getElementById("myBtn").style.display="block":document.getElementById("myBtn").style.display="none"},topic:function(category_uuid){let position=this.position;if(PushObject.loadListFinish===!0)return;let data="";position==0?data="?category_uuid="+category_uuid+"&limit=12&time_key="+PushObject.TimeKey:data="?category_uuid="+category_uuid+"&limit=12&position="+position+"&time_key="+PushObject.TimeKey;let dataUrl="";if(PushObject.selectSearchButton){let search_text=common.getParam("search");if(search_text===""||search_text===null)return common.showHint("warning","请输入搜索内容"),!1;dataUrl=common.baseUrl+"/api/v2/topic/search?title="+search_text+"&limit=12&position="+position}else dataUrl=common.baseUrl+"/api/v1/push/list"+data;var xhr=new XMLHttpRequest;xhr.open("GET",dataUrl,!0),xhr.send(),xhr.onreadystatechange=function(){if(xhr.readyState!=4)return;xhr.readyState==4&&xhr.status==200&&PushObject.canvasList(xhr),PushObject.scrollLoading=!1}},canvasList:function(xhr){if(xhr.response){if(res=JSON.parse(xhr.response),console.log("啥玩意？？？",res.data.data),res.data.data==void 0)return PushObject.loadListFinish=!0,!1;let list=res.data.data;if(PushObject.position=res.data.position,!res.data.data)return PushObject.loadListFinish=!0,!1;if(PushObject.position==0){if(!res.data.data)return PushObject.blockNoData(),!1;PushObject.noneNoData();for(var res,content=`<div class="z-timeline">`,box,i=0;i<list.length;i++)content+=`<a class="all-a" href="/info/${list[i].TopicUuid}"><div class="list-item"><div class="list-item-title"><span>${list[i].Title}</span><span class="zz-tag">${list[i].CategoryDetail.CategoryName}</span></div><div class="list-item-info">${list[i].Keyword}</div></div></a>`;content+=`</div>`,box=document.getElementById("z-timeline-container"),box.innerHTML=content}else{for(var content=`<div class="z-timeline-second">`,i=0;i<list.length;i++)content+=`<a class="all-a"href="/info/${list[i].TopicUuid}"><div class="list-item"><div class="list-item-title"><span>${list[i].Title}</span><span class="zz-tag">${list[i].CategoryDetail.CategoryName}</span></div><div class="list-item-info">${list[i].Keyword}</div></div></a>`;content+=`</div>`,box=document.getElementById("z-timeline-container"),box.innerHTML=box.innerHTML+content}}},toInfoPage:function(TopicUuid){if(!TopicUuid)return common.showHint("warning","请输入内容索引"),!1;window.open(this.infoUrl+"/"+TopicUuid)},SetPosition:function(position){var positionGet=common.getParam("position");if(positionGet){this.position=positionGet;return}this.position=position},Init:function(category_uuid){PushObject.category_uuid=category_uuid,window.onscroll=function(){PushObject.scrollFunction();var bottom=common.getScrollHeight()-(common.getScrollTop()+common.getWindowHeight());if(bottom<=200){if(PushObject.scrollLoading===!0){console.log("loading？？？");return}PushObject.scrollLoading=!0,console.log("走这里边了吗？？？"),PushObject.topic(PushObject.category_uuid)}},PushObject.topic(PushObject.category_uuid)}}