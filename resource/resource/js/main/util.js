(function($){$.fn.navList=function(){var $this=$(this);return $a=$this.find("a"),b=[],$a.each(function(){var $this=$(this),indent=Math.max(0,$this.parents("li").length-1),href=$this.attr("href"),target=$this.attr("target");b.push('<a class="link depth-'+indent+'"'+(typeof target!="undefined"&&target!=""?' target="'+target+'"':"")+(typeof href!="undefined"&&href!=""?' href="'+href+'"':"")+'><span class="indent-'+indent+'"></span>'+$this.text()+"</a>")}),b.join("")},$.fn.panel=function(userConfig){if(this.length==0)return $this;if(this.length>1){for(i=0;i<this.length;i++)$(this[i]).panel(userConfig);return $this}var i,$this=$(this),$body=$("body"),$window=$(window),id=$this.attr("id"),config=$.extend({delay:0,hideOnClick:!1,hideOnEscape:!1,hideOnSwipe:!1,resetScroll:!1,resetForms:!1,side:null,target:$this,visibleClass:"visible"},userConfig);return typeof config.target!="jQuery"&&(config.target=$(config.target)),$this._hide=function(event){if(!config.target.hasClass(config.visibleClass))return;event&&(event.preventDefault(),event.stopPropagation()),config.target.removeClass(config.visibleClass),window.setTimeout(function(){config.resetScroll&&$this.scrollTop(0),config.resetForms&&$this.find("form").each(function(){this.reset()})},config.delay)},$this.css("-ms-overflow-style","-ms-autohiding-scrollbar").css("-webkit-overflow-scrolling","touch"),config.hideOnClick&&($this.find("a").css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),$this.on("click","a",function(event){var $a=$(this),href=$a.attr("href"),target=$a.attr("target");if(!href||href=="#"||href==""||href=="#"+id)return;event.preventDefault(),event.stopPropagation(),$this._hide(),window.setTimeout(function(){target=="_blank"?window.open(href):window.location.href=href},config.delay+10)})),$this.on("touchstart",function(event){$this.touchPosX=event.originalEvent.touches[0].pageX,$this.touchPosY=event.originalEvent.touches[0].pageY}),$this.on("touchmove",function(event){if($this.touchPosX===null||$this.touchPosY===null)return;var diffX=$this.touchPosX-event.originalEvent.touches[0].pageX,diffY=$this.touchPosY-event.originalEvent.touches[0].pageY,th=$this.outerHeight(),ts=$this.get(0).scrollHeight-$this.scrollTop();if(config.hideOnSwipe){var result=!1,boundary=20,delta=50;switch(config.side){case"left":result=diffY<boundary&&diffY>-1*boundary&&diffX>delta;break;case"right":result=diffY<boundary&&diffY>-1*boundary&&diffX<-1*delta;break;case"top":result=diffX<boundary&&diffX>-1*boundary&&diffY>delta;break;case"bottom":result=diffX<boundary&&diffX>-1*boundary&&diffY<-1*delta;break;default:break}if(result)return $this.touchPosX=null,$this.touchPosY=null,$this._hide(),!1}($this.scrollTop()<0&&diffY<0||ts>th-2&&ts<th+2&&diffY>0)&&(event.preventDefault(),event.stopPropagation())}),$this.on("click touchend touchstart touchmove",function(event){event.stopPropagation()}),$this.on("click",'a[href="#'+id+'"]',function(event){event.preventDefault(),event.stopPropagation(),config.target.removeClass(config.visibleClass)}),$body.on("click touchend",function(event){$this._hide(event)}),$body.on("click",'a[href="#'+id+'"]',function(event){event.preventDefault(),event.stopPropagation(),config.target.toggleClass(config.visibleClass)}),config.hideOnEscape&&$window.on("keydown",function(event){event.keyCode==27&&$this._hide(event)}),$this},$.fn.placeholder=function(){if(typeof document.createElement("input").placeholder!="undefined")return $(this);if(this.length==0)return $this;if(this.length>1){for(i=0;i<this.length;i++)$(this[i]).placeholder();return $this}var i,$this=$(this);return $this.find("input[type=text],textarea").each(function(){var i=$(this);(i.val()==""||i.val()==i.attr("placeholder"))&&i.addClass("polyfill-placeholder").val(i.attr("placeholder"))}).on("blur",function(){var i=$(this);if(i.attr("name").match(/-polyfill-field$/))return;i.val()==""&&i.addClass("polyfill-placeholder").val(i.attr("placeholder"))}).on("focus",function(){var i=$(this);if(i.attr("name").match(/-polyfill-field$/))return;i.val()==i.attr("placeholder")&&i.removeClass("polyfill-placeholder").val("")}),$this.find("input[type=password]").each(function(){var i=$(this),x=$($("<div>").append(i.clone()).remove().html().replace(/type="password"/i,'type="text"').replace(/type=password/i,"type=text"));i.attr("id")!=""&&x.attr("id",i.attr("id")+"-polyfill-field"),i.attr("name")!=""&&x.attr("name",i.attr("name")+"-polyfill-field"),x.addClass("polyfill-placeholder").val(x.attr("placeholder")).insertAfter(i),i.val()==""?i.hide():x.hide(),i.on("blur",function(event){event.preventDefault();var x=i.parent().find("input[name="+i.attr("name")+"-polyfill-field]");i.val()==""&&(i.hide(),x.show())}),x.on("focus",function(event){event.preventDefault();var i=x.parent().find("input[name="+x.attr("name").replace("-polyfill-field","")+"]");x.hide(),i.show().focus()}).on("keypress",function(event){event.preventDefault(),x.val("")})}),$this.on("submit",function(){$this.find("input[type=text],input[type=password],textarea").each(function(){var i=$(this);i.attr("name").match(/-polyfill-field$/)&&i.attr("name",""),i.val()==i.attr("placeholder")&&(i.removeClass("polyfill-placeholder"),i.val(""))})}).on("reset",function(event){event.preventDefault(),$this.find("select").val($("option:first").val()),$this.find("input,textarea").each(function(){var x,i=$(this);switch(i.removeClass("polyfill-placeholder"),this.type){case"submit":case"reset":break;case"password":i.val(i.attr("defaultValue")),x=i.parent().find("input[name="+i.attr("name")+"-polyfill-field]"),i.val()==""?(i.hide(),x.show()):(i.show(),x.hide());break;case"checkbox":case"radio":i.attr("checked",i.attr("defaultValue"));break;case"text":case"textarea":i.val(i.attr("defaultValue")),i.val()==""&&(i.addClass("polyfill-placeholder"),i.val(i.attr("placeholder")));break;default:i.val(i.attr("defaultValue"));break}})}),$this},$.prioritize=function($elements,condition){var key="__prioritize";typeof $elements!="jQuery"&&($elements=$($elements)),$elements.each(function(){var $e=$(this),$p,$parent=$e.parent();if($parent.length==0)return;if($e.data(key)){if(condition)return;$p=$e.data(key),$e.insertAfter($p),$e.removeData(key)}else{if(!condition)return;if($p=$e.prev(),$p.length==0)return;$e.prependTo($parent),$e.data(key,$p)}})}})(jQuery)