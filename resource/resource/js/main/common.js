var common=function(){};(function(library){library.baseUrl="https://www.book-root.com",library.SetBaseUrl=function(url){library.baseUrl=url},library.getParam=function(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)","i"),r=window.location.search.substr(1).match(reg);return r!=null?decodeURI(r[2]):null},library.showHint=function(type,text){var dom=document.getElementById("zz-hint-box");dom&&(dom.innerHTML=text),type==="success"&&dom&&(document.getElementById("zz-hint-box").style.backgroundColor="#67C23A"),type==="warning"&&dom&&(document.getElementById("zz-hint-box").style.backgroundColor="#F56C6C"),type==="error"&&dom&&(document.getElementById("zz-hint-box").style.backgroundColor="#F56C6C"),dom&&(document.getElementById("zz-hint-box").style.display="block"),setTimeout(function(){dom&&(document.getElementById("zz-hint-box").style.display="none")},5e3)},library.getScrollTop=function(){var scrollTop=0,bodyScrollTop=0,documentScrollTop=0;return document.body&&(bodyScrollTop=document.body.scrollTop),document.documentElement&&(documentScrollTop=document.documentElement.scrollTop),scrollTop=bodyScrollTop-documentScrollTop>0?bodyScrollTop:documentScrollTop,scrollTop},library.getScrollHeight=function(){var scrollHeight=0,bodyScrollHeight=0,documentScrollHeight=0;return document.body&&(bodyScrollHeight=document.body.scrollHeight),document.documentElement&&(documentScrollHeight=document.documentElement.scrollHeight),scrollHeight=bodyScrollHeight-documentScrollHeight>0?bodyScrollHeight:documentScrollHeight,scrollHeight},library.getWindowHeight=function(){var windowHeight=0;return document.compatMode=="CSS1Compat"?windowHeight=document.documentElement.clientHeight:windowHeight=document.body.clientHeight,windowHeight},library.setCache=function(key,data){var timestamp=Date.parse(new Date);timestamp+=3e5,localStorage.setItem(key,JSON.stringify({data,time:timestamp}))},library.getCache=function(key){var data=localStorage.getItem(key),now;return!!data&&(data=JSON.parse(data),now=Date.parse(new Date),!(data.time<=now)&&data.data)},library.logout=function(){common.loadShow();var url=common.baseUrl+"/api/v1/user/logout";$.ajax({type:"Get",url,data:{},success:function(result){if(result.code!=200){common.showHint("warning",result.message),common.loadClose();return}common.showHint("success","登出成功"),common.loadClose(),window.location.href="/login"},error:function(){common.showHint("warning","登出失败"),common.loadClose()}})},library.toTop=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},library.onKeyPress=function(e){var keyCode=null;return e.which?keyCode=e.which:e.keyCode&&(keyCode=e.keyCode),keyCode!=13||(library.search(),!1)},library.search=function(){let search_text=document.getElementById("search-box-value").value;if(!search_text)return common.showHint("warning","请输入搜索内容"),!1;window.location.href="/search?search="+search_text},library.noneNoMore=function(){document.getElementById("zz-no-more").style.display="none"},library.blockNoMore=function(){document.getElementById("zz-no-more").style.display="block"},library.loadShow=function(){loadingShow()},library.loadClose=function(fn){setTimeout(()=>{loadingHide(),fn&&fn()},500)},library.checkEmail=function(email){let reg=/^\w+((.\w+)|(-\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/;return email!==""&&reg.test(email)}})(common)