var userAskSeekList={init:function(){var rule=template.defaults.rules[0];rule.test=new RegExp(rule.test.source.replace("<%","\\[\\?").replace("%>","\\?]")),window.onscroll=function(){userAskSeekList.scrollFunction();var bottom=common.getScrollHeight()-(common.getScrollTop()+common.getWindowHeight());if(bottom<=200){if(userAskSeekList.finishLoad===!0)return;userAskSeekList.loadList()}},this.loadList()},loadList:function(){common.loadShow(),common.noneNoMore();var url=common.baseUrl+"/api/v1/user/admin/reply/list";$.ajax({type:"Get",url,data:{limit:userAskSeekList.limit,position:userAskSeekList.position},success:function(result){if(result.code==50001){window.location.href="/login";return}if(result.code!=200){common.showHint("warning","加载失败"),common.loadClose();return}if(!result.data.data){common.blockNoMore(),userAskSeekList.finishLoad=!0,common.loadClose();return}var html=template("ask-seek-template",{data:result.data.data});userAskSeekList.position=result.data.position,$("#ask_list").append(html),common.loadClose()},error:function(){common.showHint("warning","网络错误"),common.loadClose()}})},scrollFunction:function(){document.body.scrollTop>20||document.documentElement.scrollTop>20?document.getElementById("myBtn").style.display="block":document.getElementById("myBtn").style.display="none"},clickFocus:function(shareUrl,code){$("#shareUrl").val(shareUrl),$("#code").val(code),$("#save").attr("data-clipboard-text",code),$("#myModal").modal()},hrefShareUrl:function(){var clipboard=new ClipboardJS("#save");clipboard.on("success",function(e){common.showHint("success","复制提取码成功，请点击链接使用提取码"),e.clearSelection();var url=$("#shareUrl").val(),Expression=/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/,objExp=new RegExp(Expression);objExp.test(url)||(url="https://"+url),window.open(url)}),clipboard.on("error",function(){common.showHint("warning","复制失败")})},delete:function(ele){var deleteId=ele.attr("delete-id"),url=common.baseUrl+"/api/v1/user/reply/delete/"+deleteId;if(deleteId==""){common.showHint("warning","数据id不能为空"),common.loadClose();return}$("#save").attr("disabled",!0),common.loadShow(),$.ajax({type:"Post",url,data:{},success:function(result){if(result.code!=200){common.showHint("warning",result.message),common.loadClose(),$("#save").attr("disabled",!1);return}common.loadClose(function(){$("#warnModal").modal("hide"),$("#data-"+deleteId).remove()})},error:function(){common.showHint("warning","提交失败"),common.loadClose(),$("#save").attr("disabled",!1)}})}}