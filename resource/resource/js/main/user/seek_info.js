var seekInfoObject={position:0,limit:10,finishLoad:!1,save:function(seekUuid,uuid){uuid?(url=common.baseUrl+"/api/v1/user/edit/reply/seek"):(url=common.baseUrl+"/api/v1/user/reply/seek");var shareUrl=$("#shareUrl").val();if(shareUrl===""){common.showHint("warning","资料名称不能是空");return}var sharePwd=$("#code").val(),url,is_anonymous=0,anonymous=$("#anonymous").is(":checked");anonymous===!1?is_anonymous=0:is_anonymous=1;var comment=$("#comment").val();if(comment==""){common.showHint("warning","评论不能为空");return}var data={seek_uuid:seekUuid,url:shareUrl,pwd:sharePwd,comment,anonymous:is_anonymous};uuid&&(data.uuid=uuid),$("#save").attr("disabled",!0),common.loadShow(),$.ajax({type:"Post",url,data,success:function(result){if(result.code==50001){window.location.href="/login";return}if(result.code!=200){common.showHint("warning",result.message),common.loadClose(),$("#save").attr("disabled",!1);return}common.loadClose(function(){$("#save").attr("disabled",!1),window.location.href="/user/ask/success/"+result.data.Uuid})},error:function(){common.showHint("warning","提交失败"),common.loadClose(),$("#save").attr("disabled",!1)}})},init:function(seekUuid){var rule=template.defaults.rules[0];rule.test=new RegExp(rule.test.source.replace("<%","\\[\\?").replace("%>","\\?]")),window.onscroll=function(){seekInfoObject.scrollFunction();var bottom=common.getScrollHeight()-(common.getScrollTop()+common.getWindowHeight());if(bottom<=200){if(seekInfoObject.finishLoad===!0)return;seekInfoObject.loadList(seekUuid)}},this.loadList(seekUuid)},blockNoMore:function(){document.getElementById("zz-no-more").style.display="block"},loadList:function(seekUuid){common.loadShow();var url=common.baseUrl+"/api/v1/user/reply/list";$.ajax({type:"Get",url,data:{seek_uuid:seekUuid,limit:seekInfoObject.limit,position:seekInfoObject.position},success:function(result){if(result.code!=200){common.showHint("warning","加载失败"),common.loadClose();return}if(!result.data.data){seekInfoObject.blockNoMore(),seekInfoObject.finishLoad=!0,common.loadClose();return}var html=template("ask-template",{data:result.data.data});seekInfoObject.position=result.data.position,$("#ask_list").append(html),common.loadClose()},error:function(){common.showHint("warning","网络错误"),common.loadClose()}})},scrollFunction:function(){document.body.scrollTop>20||document.documentElement.scrollTop>20?document.getElementById("myBtn").style.display="block":document.getElementById("myBtn").style.display="none"}}