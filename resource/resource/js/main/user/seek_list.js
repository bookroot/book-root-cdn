var seekListObject={position:0,limit:10,finishLoad:!1,loadding:!1,SetPosition:function(position){var positionGet=common.getParam("position");if(positionGet){this.position=positionGet;return}this.position=position},Init:function(){var rule=template.defaults.rules[0];rule.test=new RegExp(rule.test.source.replace("<%","\\[\\?").replace("%>","\\?]")),window.onscroll=function(){seekListObject.scrollFunction();var bottom=common.getScrollHeight()-(common.getScrollTop()+common.getWindowHeight());if(bottom<=200){if(seekListObject.finishLoad===!0)return;if(seekListObject.loadding==!0)return;seekListObject.loadList()}}},loadList:function(){common.loadShow();var url=common.baseUrl+"/api/v1/topic/seek_list";seekListObject.loadding=!0,$.ajax({type:"Get",url,data:{user_uuid:localStorage.getItem("user_uuid"),limit:seekListObject.limit,position:seekListObject.position},success:function(result){if(result.code==50001){window.location.href="/login";return}if(result.code!=200){seekListObject.loadding=!1,common.showHint("warning","加载失败"),common.loadClose();return}if(!result.data.data){seekListObject.loadding=!1,common.showHint("success","加载完成没有更多数据"),seekListObject.finishLoad=!0,common.loadClose();return}var html=template("seek-list-template",{data:result.data.data});seekListObject.position=result.data.position,$("#seek-list").append(html),common.loadClose(),seekListObject.loadding=!1},error:function(){common.showHint("warning","网络错误"),common.loadClose(),seekListObject.loadding=!1}})},scrollFunction:function(){document.body.scrollTop>20||document.documentElement.scrollTop>20?document.getElementById("myBtn").style.display="block":document.getElementById("myBtn").style.display="none"},delete:function(ele){var deleteId=ele.attr("delete-id"),url=common.baseUrl+"/api/v1/user/seek/delete/"+deleteId;if(deleteId==""){common.showHint("warning","数据id不能为空"),common.loadClose();return}$("#save").attr("disabled",!0),common.loadShow(),$.ajax({type:"Post",url,data:{},success:function(result){if(result.code!=200){common.showHint("warning",result.message),common.loadClose(),$("#save").attr("disabled",!1);return}common.loadClose(function(){$("#warnModal").modal("hide"),$("#data-"+deleteId).remove()})},error:function(){common.showHint("warning","提交失败"),common.loadClose(),$("#save").attr("disabled",!1)}})}}